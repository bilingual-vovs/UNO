{"ast":null,"code":"var _jsxFileName = \"/home/vova/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Projects/UNO/app/src/components/GameTable/GameTable.jsx\";\nimport React, { Component } from 'react';\nimport Card from '../Card/Card';\nimport Alert from '../Alert/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass GameTable extends Component {\n  constructor() {\n    var _this;\n\n    super(...arguments);\n    _this = this;\n    this.winners = [];\n    this._lastZIndex = 100;\n    this._botNumber = 3;\n    this.direction = true;\n    this.nowMoving = 0;\n    this._mounted = false;\n    this._colors = [\"yellow\", \"green\", \"blue\", \"red\"];\n    this._cardGroupes = {\n      colode: [],\n      player: [],\n      bots: [],\n      played: [],\n      active: [],\n      move: (id, to) => {\n        let {\n          colode,\n          bots,\n          player\n        } = this._cardGroupes;\n\n        for (let botKey in bots) {\n          let bot = bots[botKey];\n\n          for (let cardKey in bot) {\n            let card = bot[cardKey];\n\n            if (card === id) {\n              let card = this._cardGroupes.bots[botKey][cardKey];\n\n              this._cardGroupes[to].push(card);\n\n              this._cardGroupes.bots[botKey].splice(this._cardGroupes.bots[botKey].indexOf(card), 1);\n            }\n          }\n        }\n\n        for (let cardKey in colode) {\n          let card = colode[cardKey];\n\n          if (card === id) {\n            let card = this._cardGroupes.colode[cardKey];\n\n            this._cardGroupes[to].push(card);\n\n            this._cardGroupes.colode.splice(this._cardGroupes.colode.indexOf(card), 1);\n          }\n        }\n\n        for (let cardKey in player) {\n          let card = player[cardKey];\n\n          if (card === id) {\n            let card = this._cardGroupes.player[cardKey];\n\n            this._cardGroupes[to].push(card);\n\n            this._cardGroupes.player.splice(this._cardGroupes.player.indexOf(card), 1);\n          }\n        }\n      }\n    };\n    this._newActive = [];\n    this._stopAction = 0;\n    this.players = [this._cardGroupes.player];\n    this._colodePos = {\n      x: 55,\n      y: 35\n    };\n    this.state = {};\n\n    this._createCard = function (color, cardName, size, posX, posY, face) {\n      var _cardName$, _cardName$2, _cardName$3;\n\n      let addIndx = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : '';\n      let rot = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      let z = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 1;\n\n      _this.setState({\n        [color[0] + ((_cardName$ = cardName[0]) !== null && _cardName$ !== void 0 ? _cardName$ : cardName) + addIndx]: {\n          color,\n          cardName,\n          size,\n          posX,\n          posY,\n          face,\n          id: color[0] + ((_cardName$2 = cardName[0]) !== null && _cardName$2 !== void 0 ? _cardName$2 : cardName) + addIndx,\n          rot,\n          z\n        }\n      });\n\n      _this._cardGroupes.colode.push(color[0] + ((_cardName$3 = cardName[0]) !== null && _cardName$3 !== void 0 ? _cardName$3 : cardName) + addIndx);\n    };\n\n    this._normalizeColode = () => {\n      let {\n        _cardGroupes: {\n          colode\n        },\n        _locateCard,\n        _colodePos: {\n          x,\n          y\n        },\n        _flipCard\n      } = this;\n      let i = 0;\n\n      for (let card in colode) {\n        i++;\n\n        _locateCard(colode[card], 150, x + i * 0.01, y + i * -0.1, false, i);\n      }\n    };\n\n    this._locateCard = (id, size, posX, posY, rot, z, face) => {\n      this.setState(state => {\n        let card = { ...state[id]\n        };\n        card.size = size !== null && size !== void 0 ? size : card[size];\n        card.posX = posX !== null && posX !== void 0 ? posX : card[posX];\n        card.posY = posY !== null && posY !== void 0 ? posY : card[posY];\n        card.rot = rot !== null && rot !== void 0 ? rot : card[rot];\n        card.z = z !== null && z !== void 0 ? z : card[z];\n        return {\n          [id]: card\n        };\n      });\n    };\n\n    this._flipCard = (id, facing) => {\n      this.setState(state => {\n        let card = { ...state[id]\n        };\n        card.face = facing !== null && facing !== void 0 ? facing : !card.face;\n        return {\n          [id]: card\n        };\n      });\n    };\n\n    this._updateCardPosition = () => {\n      let {\n        _cardGroupes: {\n          player,\n          bots\n        },\n        _flipCard,\n        _locateCard\n      } = this;\n      let i = 0;\n      let y = 0 - player.length / 2;\n\n      for (let card in player) {\n        _flipCard(player[card], true);\n\n        _locateCard(player[card], 200, 10 + 70 / player.length / 2 + i * 70 / player.length, 70 + Math.abs(y * y / 5.25) / player.length * 10, 3 * y, i);\n\n        y++;\n        i++;\n      }\n\n      let botCount = 1;\n\n      for (let bot in bots) {\n        let botCrd = bots[bot];\n        i = 0;\n        y = 0 - botCrd.length / 2;\n\n        for (let card in botCrd) {\n          switch (botCount) {\n            case 1:\n              _locateCard(botCrd[card], 120, 0 - Math.abs(y * y / 10), 10 + 50 / botCrd.length / 2 + i * 50 / botCrd.length, 90 * botCount + 3 * y, i);\n\n              break;\n\n            case 2:\n              _locateCard(botCrd[card], 120, 20 + 50 / botCrd.length / 2 + i * 50 / botCrd.length, 0 - Math.abs(y * y / 5.25), 180 - 3 * y, i);\n\n              break;\n\n            case 3:\n              _locateCard(botCrd[card], 120, 93 + Math.abs(y * y / 10), 10 + 50 / botCrd.length / 2 + i * 50 / botCrd.length, 90 * botCount - 3 * y, i);\n\n              break;\n\n            default:\n              break;\n          }\n\n          y++;\n          i++;\n        }\n\n        botCount++;\n      }\n    };\n\n    this._playCard = id => {\n      this._cardGroupes.move(id, \"played\");\n\n      this._lastZIndex += 1;\n\n      this._flipCard(id, true);\n\n      this._locateCard(id, 150, 35, 35, 0, this._lastZIndex);\n\n      this._updateCardPosition();\n\n      this._newActive.push(id);\n\n      if (id[1] === 's') this._stopAction++;\n      if (id[1] === \"r\") this.direction = !this.direction;\n    };\n\n    this._changeActive = () => {\n      this._cardGroupes.active = this._newActive;\n      this._newActive = [];\n    };\n\n    this.takeCard = () => {\n      let player = this.nowMoving;\n\n      let card = this._cardGroupes.colode.shift();\n\n      if (player === 0) {\n        this._flipCard(card, true);\n\n        this._cardGroupes.player.push(card);\n      } else {\n        this._flipCard(card, false);\n\n        this._cardGroupes.bots[player - 1].push(card);\n      }\n\n      if (this._cardGroupes.colode.length < 5) {\n        this._cardGroupes.colode = this._cardGroupes.played;\n\n        this._mixColode();\n\n        this._cardGroupes.played = [];\n\n        this._normalizeColode();\n      }\n\n      this._updateCardPosition();\n    };\n\n    this.playerPlayCard = card => {\n      let {\n        isPLayers,\n        _cardGroupes: {\n          active,\n          player\n        },\n        nowMoving,\n        props: {\n          cardAlert\n        },\n        nextMove,\n        takeCard\n      } = this;\n      let activeCard = active[active.length - 1];\n      let posibility = player.find(elm => elm[0] === active[0] || elm[1] === active[1] || elm[0] === 'w' || active[0] === 'w');\n\n      if (isPLayers(card) && nowMoving === 0 && (card[0] === activeCard[0] || card[1] === activeCard[1] || card[0] === \"w\" || activeCard[0] === \"w\" || this._newActive[this._newActive.length - 1][0] === \"w\")) {\n        this._playCard(card);\n\n        if (card[0] !== \"w\" && card[1] !== \"r\") {\n          this._changeActive();\n\n          nextMove();\n        } else if (!posibility) {\n          takeCard();\n          nextMove();\n        }\n      } else {\n        cardAlert();\n      }\n    };\n\n    this.botMove = () => {\n      let id = this.nowMoving - 1;\n      let {\n        _cardGroupes: {\n          bots,\n          active: activeArr\n        },\n        _playCard: playCard,\n        takeCard,\n        _stopAction\n      } = this;\n      let bot = bots[id];\n      let active = activeArr[activeArr.length - 1];\n      let movementFinished,\n          oneCardHasBeenTaken = false;\n      let cardsToTake = 0;\n      activeArr.forEach(elm => {\n        if (elm.slice(0, 2) === \"wp\") {\n          cardsToTake += 4;\n        } else if (elm[1] === \"p\") {\n          cardsToTake += 2;\n        }\n      });\n\n      for (let i = 0; i < cardsToTake; i++) {\n        takeCard();\n      }\n\n      if (_stopAction > 0) {\n        this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]];\n        this._stopAction -= 1;\n        this.nextMove();\n      } else {\n        let a = setInterval(() => {\n          let card = bot.find(elm => elm[0] === active[0] || elm[1] === active[1] || active[0] === 'w');\n          setTimeout(() => {});\n\n          if (card) {\n            playCard(card);\n\n            if (card[0] !== \"w\" && card[1] !== \"r\") {\n              movementFinished = true;\n            }\n          } else {\n            takeCard();\n            oneCardHasBeenTaken = true;\n          }\n\n          if (oneCardHasBeenTaken || movementFinished) {\n            clearInterval(a);\n            if (movementFinished) this._changeActive();\n            this.nextMove();\n          }\n        }, 600);\n      }\n    };\n\n    this.isPLayers = id => {\n      let {\n        player\n      } = this._cardGroupes;\n\n      if (player.indexOf(id) !== -1) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.playerMove = () => {\n      let {\n        _cardGroupes: {\n          active: activeArr,\n          player\n        },\n        takeCard,\n        nextMove,\n        _stopAction\n      } = this;\n      let active = activeArr[activeArr.length - 1];\n      let cardsToTake = 0;\n      activeArr.forEach(elm => {\n        if (elm.slice(0, 2) === \"wp\") {\n          cardsToTake += 4;\n        } else if (elm[1] === \"p\") {\n          cardsToTake += 2;\n        }\n      });\n      let posibility = player.find(elm => elm[0] === active[0] || elm[1] === active[1] || elm[0] === 'w' || active[0] === 'w');\n\n      for (let i = 0; i < cardsToTake; i++) {\n        takeCard();\n      }\n\n      if (_stopAction > 0) {\n        _stopAction--;\n        this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]];\n        nextMove();\n      } else if (!posibility) {\n        takeCard();\n        this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]];\n        nextMove();\n      }\n    };\n\n    this.nextMove = () => {\n      this.isWinner();\n\n      if (this.direction) {\n        switch (this.nowMoving) {\n          case this._botNumber:\n            this.nowMoving = 0;\n            break;\n\n          default:\n            this.nowMoving++;\n            break;\n        }\n      } else {\n        switch (this.nowMoving) {\n          case 0:\n            this.nowMoving = 3;\n            break;\n\n          default:\n            this.nowMoving--;\n            break;\n        }\n      }\n\n      if (this.nowMoving !== 0) {\n        setTimeout(() => {\n          this.botMove();\n        }, 700);\n      } else {\n        this.playerMove();\n      }\n    };\n\n    this.isWinner = () => {\n      let {\n        _cardGroupes: {\n          player,\n          bots\n        },\n        nowMoving: id\n      } = this;\n\n      if (id === 0) {\n        if (player.length === 0) this.winners.push(id);\n      } else if (bots[id - 1].length === 0) {\n        this.winners.push(id);\n      }\n    };\n\n    this._startGame = () => {};\n  }\n\n  _createCards() {\n    let {\n      _colors,\n      _colodePos,\n      _createCard\n    } = this;\n    let cardNum = 0;\n\n    for (let color in _colors) {\n      for (let i = 0; i < 10; i++) {\n        cardNum++;\n\n        _createCard(_colors[color], i, 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false);\n      }\n\n      cardNum++;\n\n      _createCard(_colors[color], \"picker\", 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false);\n\n      cardNum++;\n\n      _createCard(_colors[color], \"reverse\", 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false);\n\n      cardNum++;\n\n      _createCard(_colors[color], \"skip\", 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false);\n    }\n\n    for (let i = 0; i < 4; i++) {\n      cardNum++;\n\n      _createCard(\"wild\", \"colora_changer\", 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false, i);\n\n      cardNum++;\n\n      _createCard(\"wild\", \"pick_four\", 150, _colodePos.x + cardNum * 0.01, _colodePos.y + cardNum * -0.1, false, i);\n    }\n  }\n\n  _generateColode() {\n    this._createCards();\n\n    this._mixColode();\n  }\n\n  _mixColode() {\n    let colodeCopy = [...this._cardGroupes.colode];\n    let newColode = [];\n\n    while (colodeCopy.length > 0) {\n      newColode.push(colodeCopy.splice(Math.floor(Math.random() * colodeCopy.length), 1)[0]);\n    }\n\n    this._cardGroupes.colode = newColode;\n  }\n\n  _dealCards() {\n    let {\n      _cardGroupes: {\n        colode\n      },\n      _botNumber,\n      _playCard: playCard,\n      _flipCard,\n      _changeActive: changeActive\n    } = this;\n    this._cardGroupes.player = colode.splice(colode.length - 7, 6);\n\n    for (let i = 0; i < _botNumber; i++) {\n      this._cardGroupes.bots[i] = colode.splice(colode.length - 7, 6);\n    }\n\n    this._updateCardPosition();\n\n    _flipCard(colode[colode.length - 1], true);\n\n    playCard(colode[colode.length - 1]);\n    changeActive();\n  }\n\n  componentDidMount() {\n    if (!this._mounted) {\n      this._generateColode();\n\n      this._dealCards();\n\n      this.playerMove();\n\n      this._normalizeColode();\n    }\n\n    this._mounted = true;\n  }\n\n  render() {\n    let cards = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"game\",\n      children: Object.values(cards).map(element => {\n        return /*#__PURE__*/_jsxDEV(Card, {\n          playCard: () => {\n            this.playerPlayCard(element.id);\n          },\n          isPlayers: this.isPLayers,\n          ...element\n        }, element.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 65\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default GameTable;","map":{"version":3,"names":["React","Component","Card","Alert","GameTable","winners","_lastZIndex","_botNumber","direction","nowMoving","_mounted","_colors","_cardGroupes","colode","player","bots","played","active","move","id","to","botKey","bot","cardKey","card","push","splice","indexOf","_newActive","_stopAction","players","_colodePos","x","y","state","_createCard","color","cardName","size","posX","posY","face","addIndx","rot","z","setState","_normalizeColode","_locateCard","_flipCard","i","facing","_updateCardPosition","length","Math","abs","botCount","botCrd","_playCard","_changeActive","takeCard","shift","_mixColode","playerPlayCard","isPLayers","props","cardAlert","nextMove","activeCard","posibility","find","elm","botMove","activeArr","playCard","movementFinished","oneCardHasBeenTaken","cardsToTake","forEach","slice","a","setInterval","setTimeout","clearInterval","playerMove","isWinner","_startGame","_createCards","cardNum","_generateColode","colodeCopy","newColode","floor","random","_dealCards","changeActive","componentDidMount","render","cards","Object","values","map","element"],"sources":["/home/vova/Документы/Projects/UNO/app/src/components/GameTable/GameTable.jsx"],"sourcesContent":["import React, { Component } from 'react';\n\nimport Card from '../Card/Card';\nimport Alert from '../Alert/Alert';\n\nclass GameTable extends Component {\n    winners = []\n\n    _lastZIndex = 100\n    _botNumber = 3\n\n    direction = true\n    nowMoving = 0\n\n    _mounted = false\n\n    _colors = [\"yellow\", \"green\", \"blue\", \"red\"]\n\n    _cardGroupes = {\n        colode: [],\n        player: [],\n        bots: [],\n        played: [],\n        active: [],\n        move: (id, to) =>{\n            let {colode, bots, player} = this._cardGroupes\n            for(let botKey in bots){\n                let bot = bots[botKey]\n                for (let cardKey in bot){\n                    let card = bot[cardKey]\n                    if (card === id) {\n                        let card = this._cardGroupes.bots[botKey][cardKey]\n                        this._cardGroupes[to].push(card)\n                        this._cardGroupes.bots[botKey].splice(this._cardGroupes.bots[botKey].indexOf(card), 1)\n                    }\n                }\n            }\n            \n            for (let cardKey in colode){\n                let card = colode[cardKey]\n                if (card === id) {\n                    let card = this._cardGroupes.colode[cardKey]\n                    this._cardGroupes[to].push(card)\n                    this._cardGroupes.colode.splice(this._cardGroupes.colode.indexOf(card), 1)\n                }\n            }\n\n            for (let cardKey in player){\n                let card = player[cardKey]\n                if (card === id) {\n                    let card = this._cardGroupes.player[cardKey]\n                    this._cardGroupes[to].push(card)\n                    this._cardGroupes.player.splice(this._cardGroupes.player.indexOf(card), 1)\n                }\n            }\n        }\n    }\n    _newActive = []\n    _stopAction = 0\n    players = [this._cardGroupes.player]\n\n    _colodePos = {\n        x: 55, \n        y: 35\n    }\n\n    state = {\n\n    }\n\n    _createCard = (color, cardName, size, posX, posY, face, addIndx = '', rot = 0, z = 1)=>{\n        this.setState({\n            [color[0] + (cardName[0] ?? cardName) + addIndx]: {\n                color,\n                cardName, \n                size, \n                posX,\n                posY, \n                face,\n                id: color[0] + (cardName[0] ?? cardName) + addIndx, \n                rot,\n                z\n            }\n        })\n        this._cardGroupes.colode.push(color[0] + (cardName[0] ?? cardName) + addIndx)\n    }\n\n    _createCards(){\n        let {_colors, _colodePos, _createCard} = this\n        let cardNum = 0\n        for(let color in _colors){\n            for( let i = 0; i<10; i++){\n                cardNum++\n                _createCard(_colors[color], i, 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false)\n            }\n            cardNum++\n            _createCard(_colors[color], \"picker\", 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false)\n            cardNum++\n            _createCard(_colors[color], \"reverse\", 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false)\n            cardNum++\n            _createCard(_colors[color], \"skip\", 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false)\n        }\n        for(let i = 0; i< 4; i++){\n            cardNum++\n            _createCard(\"wild\", \"colora_changer\", 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false, i)\n            cardNum++\n            _createCard(\"wild\", \"pick_four\", 150, _colodePos.x+cardNum*0.01, _colodePos.y+cardNum*-0.1, false, i)\n        }   \n    }\n\n    _normalizeColode = () => {\n        let {_cardGroupes: {colode}, _locateCard, _colodePos: {x, y}, _flipCard} = this\n        let i = 0\n        for (let card in colode){\n            i++\n            _locateCard(colode[card], 150, x+i*0.01, y+i*-0.1, false, i)\n        }\n    }\n\n    _generateColode(){\n        this._createCards()\n        this._mixColode()\n    }\n\n    _mixColode(){\n        let colodeCopy = [...this._cardGroupes.colode]\n        let newColode = []\n\n        while (colodeCopy.length>0){\n            newColode.push(colodeCopy.splice(Math.floor(Math.random()*colodeCopy.length), 1)[0]) \n        }\n\n        this._cardGroupes.colode = newColode\n    }\n\n    _dealCards(){\n        let {_cardGroupes: {colode}, _botNumber, _playCard: playCard, _flipCard, _changeActive: changeActive} = this\n        this._cardGroupes.player = colode.splice(colode.length-7, 6)\n        for(let i = 0; i<_botNumber;i++){\n            this._cardGroupes.bots[i] = colode.splice(colode.length-7, 6)\n        }\n\n       this._updateCardPosition()\n       _flipCard(colode[colode.length-1], true)\n        playCard(colode[colode.length-1])\n        changeActive()\n    }\n\n    _locateCard = (id, size, posX, posY, rot, z, face)=>{\n        this.setState(\n            (state)=>{\n                let card = {...state[id]}\n                card.size = (size ?? card[size])\n                card.posX = (posX ?? card[posX])\n                card.posY = (posY ?? card[posY])\n                card.rot = (rot ?? card[rot])\n                card.z = (z ?? card[z])\n                return {\n                    [id]: card\n                }\n            }\n        )\n    }\n\n    _flipCard = (id, facing) =>{\n        this.setState(\n            (state)=>{\n                let card = {...state[id]}\n                card.face = (facing ?? !card.face)\n                return {\n                    [id]: card\n                }\n            }\n        )\n    }\n\n    _updateCardPosition = () => {\n        let {_cardGroupes: {player, bots}, _flipCard, _locateCard} = this\n        let i = 0\n        let y = 0 - player.length / 2\n        for(let card in player){\n            _flipCard(player[card], true)\n            _locateCard(player[card], 200, 10+70 /player.length/2+(i*70 /player.length), 70+Math.abs(y*y/5.25)/player.length*10, 3*y, i)\n            y++\n            i++\n        }\n        \n\n        let botCount = 1\n        for(let bot in bots){\n            let botCrd = bots[bot]\n            i = 0\n            y = 0 - botCrd.length / 2\n            for(let card in botCrd){\n                switch (botCount) {\n                    case 1:\n                        _locateCard(botCrd[card], 120, 0-Math.abs(y*y/10),10+50 /botCrd.length/2+(i*50 /botCrd.length), 90*botCount+3*y, i)\n                    break;\n                    case 2:\n                        _locateCard(botCrd[card], 120, 20+50 /botCrd.length/2+(i*50 /botCrd.length), 0-Math.abs(y*y/5.25), 180-3*y, i)\n                    break;\n                    case 3:\n                        _locateCard(botCrd[card], 120, 93+Math.abs(y*y/10),10+50 /botCrd.length/2+(i*50 /botCrd.length), 90*botCount-3*y, i)\n                    break;\n                    default:\n\n                    break;\n                }\n                y++\n                i++\n            }\n            botCount++\n        }\n        \n\n    }\n\n    _playCard = (id) =>{\n        this._cardGroupes.move(id, \"played\")\n        this._lastZIndex += 1\n        this._flipCard(id, true)\n        this._locateCard(id, 150, 35, 35, 0, this._lastZIndex)\n        this._updateCardPosition()\n        this._newActive.push(id)\n        if (id[1] === 's') this._stopAction++\n        if (id[1] === \"r\") this.direction = !this.direction\n    }\n\n    _changeActive = () => {\n        this._cardGroupes.active = this._newActive\n        this._newActive = []\n    }\n    \n\n    takeCard = () => {\n        let player = this.nowMoving\n        let card = this._cardGroupes.colode.shift()\n        if (player === 0){\n            this._flipCard(card, true)\n            this._cardGroupes.player.push(card)\n        }\n        else{\n            this._flipCard(card, false)\n            this._cardGroupes.bots[player-1].push(card)\n        }\n\n        if (this._cardGroupes.colode.length < 5){\n            this._cardGroupes.colode = this._cardGroupes.played\n            this._mixColode()\n            this._cardGroupes.played = []\n            this._normalizeColode()\n        }\n\n        this._updateCardPosition()\n    }\n\n    playerPlayCard = (card) => {\n        let {isPLayers, _cardGroupes: {active, player}, nowMoving, props: {cardAlert}, nextMove, takeCard} = this\n        let activeCard = active[active.length-1]\n\n        let posibility = player.find((elm)=>elm[0] === active[0] || elm[1] === active[1] || elm[0] === 'w'  || active[0] === 'w' )\n\n        if(isPLayers(card) && nowMoving === 0 && (card[0] === activeCard[0] || card[1] === activeCard[1] || card[0] === \"w\" || activeCard[0] === \"w\" || this._newActive[this._newActive.length - 1][0] === \"w\")){\n            this._playCard(card)\n            if (card[0] !== \"w\" && card[1] !== \"r\"){\n                this._changeActive()\n                nextMove()\n            } else if (!posibility) {\n                takeCard()\n                nextMove()\n            }\n        }\n        else {\n            cardAlert()\n        }\n        \n        \n    }\n\n    botMove = () => {\n        let id = this.nowMoving-1\n        let {_cardGroupes: {bots, active: activeArr}, _playCard: playCard, takeCard, _stopAction} = this\n        let bot = bots[id]\n        let active = activeArr[activeArr.length-1]\n        let movementFinished, oneCardHasBeenTaken = false\n\n        let cardsToTake = 0\n        activeArr.forEach((elm)=>{\n            if (elm.slice(0, 2) === \"wp\"){\n                cardsToTake += 4\n            }\n            else if (elm[1] === \"p\"){\n                cardsToTake += 2\n            }\n        })\n        \n        for(let i = 0; i<cardsToTake;i++){\n            takeCard()\n        }\n\n        if (_stopAction > 0){\n            this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]]\n            this._stopAction -= 1\n            this.nextMove()\n        }else{\n        let a = setInterval(()=>{\n            \n            let card = bot.find((elm)=>elm[0] === active[0] || elm[1] === active[1] || active[0] === 'w' )\n            setTimeout(()=>{})\n            if  (card){\n                playCard(card)\n                if ((card[0] !== \"w\" && card[1] !== \"r\")){\n                    movementFinished = true\n                }\n            }\n            else{\n                takeCard()\n                oneCardHasBeenTaken = true\n            }\n            if((oneCardHasBeenTaken || movementFinished)){\n                clearInterval(a)\n                if (movementFinished)   this._changeActive()\n                this.nextMove()\n            }\n        }, 600)\n        }\n\n    }\n\n    isPLayers = (id) => {\n        let {player} = this._cardGroupes\n        if(player.indexOf(id) !== -1){\n            return true\n        }\n        else{\n            return false\n        }\n    }\n\n    playerMove = () => {\n        let {_cardGroupes: {active: activeArr, player}, takeCard, nextMove, _stopAction} = this\n        let active = activeArr[activeArr.length-1]\n\n\n        let cardsToTake = 0\n        activeArr.forEach((elm)=>{\n            if (elm.slice(0, 2) === \"wp\"){\n                cardsToTake += 4\n            }\n            else if (elm[1] === \"p\"){\n                cardsToTake += 2\n            }\n        })\n\n        let posibility = player.find((elm)=>elm[0] === active[0] || elm[1] === active[1] || elm[0] === 'w'  || active[0] === 'w' )\n        \n        for(let i = 0; i<cardsToTake;i++){\n            takeCard()\n        }\n        if (_stopAction> 0) {\n            _stopAction-- \n            this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]]\n            nextMove()\n        }\n        else if (! posibility){\n            takeCard()\n            this._cardGroupes.active = [this._cardGroupes.active[this._cardGroupes.active.length - 1]]\n            nextMove()\n        }\n\n\n    }\n\n    nextMove = () => {\n        this.isWinner()\n\n        if (this.direction){\n            switch (this.nowMoving) {\n                case this._botNumber:\n                    this.nowMoving = 0\n                break;\n                default:\n                    this.nowMoving++\n                break;\n            }\n        }\n        else{\n            switch (this.nowMoving) {\n                case 0:\n                    this.nowMoving = 3\n                break;\n                default:\n                    this.nowMoving--\n                break;\n            }\n        }\n        if (this.nowMoving !== 0){\n            setTimeout(()=>{\n                this.botMove()\n            }, 700)\n            \n        }\n        else{\n            this.playerMove()\n        }\n    }\n\n    isWinner = () => {\n        let {_cardGroupes: {player, bots}, nowMoving: id} = this\n\n        if (id === 0) {\n            if (player.length === 0) this.winners.push(id)\n        }\n        else if (bots[id-1].length === 0){\n            this.winners.push(id)\n        }\n    }\n\n    _startGame = () => {\n        \n    }\n    \n    componentDidMount(){\n        if (!this._mounted){\n            this._generateColode()\n            this._dealCards()\n            this.playerMove()\n            this._normalizeColode()\n        }\n        this._mounted = true\n    }\n\n    render() {\n        let cards = this.state\n\n        return (\n            <div id='game'>\n                {\n                    Object.values(cards).map((element)=>{return <Card playCard={()=>{this.playerPlayCard(element.id)}} isPlayers={this.isPLayers} key = {element.id} {...element}/>})\n                }\n            </div>\n        );\n    \n        \n    }\n}\n\nexport default GameTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}